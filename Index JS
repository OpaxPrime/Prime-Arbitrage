import { fetchTrendingItems, fetchPriceHistory } from './services/api.js';
import Navigation from './components/Navigation/Navigation.js';
import TrendingItems from './components/TrendingItems/TrendingItems.js';

async function initializeApp() {
    const root = document.getElementById('root');
    const state = {
        isPremium: false,
        trendingItems: await fetchTrendingItems(),
        priceHistory: await fetchPriceHistory(1),
    };

    function render() {
        root.innerHTML = `
            ${Navigation({ isPremium: state.isPremium, setIsPremium })}
            <main class="main-content">
                ${TrendingItems({ items: state.trendingItems })}
                <!-- Other components would be rendered here -->
            </main>
        `;
    }

    function setIsPremium(value) {
        state.isPremium = value;
        render();
    }

    render();
}

initializeApp();
